
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Divisibility &#8212; Data Structures in Smalltalk  documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Data Structures in Smalltalk</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=massimo-nocentini&repo=Booklet-DSst&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pharo/pharo.html">Pharo</a></li>
<li class="toctree-l1"><a class="reference internal" href="symbolic.html">Symbolic computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linked-allocation/linked-allocation.html">Linked memory allocation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="divisibility">
<h1>Divisibility<a class="headerlink" href="#divisibility" title="Permalink to this headline">¶</a></h1>
<div class="section" id="quotients-and-remainders">
<h2>Quotients and remainders<a class="headerlink" href="#quotients-and-remainders" title="Permalink to this headline">¶</a></h2>
<p>Lets divide <span class="math notranslate nohighlight">\(20\)</span> by <span class="math notranslate nohighlight">\(9\)</span>,</p>
<span class="target" id="pharo-compiledMethod-0"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-teststandardquorem21over9"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testStandardQuoRem21Over9</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">21</span> <span class="nf">/%</span> <span class="m">9</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> <span class="m">21</span> <span class="nf">/</span> <span class="m">9</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testStandardQuoRem21Over9.svg" class="align-center" src="../_images/SymbolicIntegerTest-testStandardQuoRem21Over9.svg" /></div></blockquote>
<p>by means of the binary message</p>
<span class="target" id="pharo-compiledMethod-1"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-integer"><div class="highlight"><pre><span></span><span class="c">&quot;Integer, protocol *Containers-Essentials&quot;</span>
<span class="nf">/%</span> <span class="nv">anObject</span>

   <span class="o">^</span> <span class="nv">anObject</span> <span class="nf">quoRemInteger:</span> <span class="bp">self</span>
</pre></div>
</div>
<p>that dispatches</p>
<span class="target" id="pharo-compiledMethod-2"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-integer-quoreminteger"><div class="highlight"><pre><span></span><span class="c">&quot;Integer, protocol *Containers-Essentials&quot;</span>
<span class="nf">quoRemInteger:</span> <span class="nv">anInteger</span>

   <span class="o">^</span> <span class="nc">QuoRemStandard</span> <span class="nf">a:</span> <span class="nv">anInteger</span> <span class="nf">b:</span> <span class="bp">self</span>
</pre></div>
</div>
<p>which instantiate a symbolic <code class="docutils literal notranslate"><span class="pre">Magnitude</span></code> object via the class-side message</p>
<span class="target" id="pharo-compiledMethod-3"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-quoremcomplementary-class-a-b"><div class="highlight"><pre><span></span><span class="c">&quot;QuoRemComplementary class, protocol as yet unclassified&quot;</span>
<span class="nf">a:</span> <span class="nv">a</span> <span class="nf">b:</span> <span class="nv">b</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">basicNew</span>
        <span class="nf">a:</span> <span class="nv">a</span><span class="p">;</span>
        <span class="nf">b:</span> <span class="nv">b</span><span class="p">;</span>
        <span class="nf">initialize</span><span class="p">;</span>
        <span class="nf">yourself</span>
</pre></div>
</div>
<p>where both the <em>quotient</em> and the <em>remainder</em> are computed in the overridden</p>
<span class="target" id="pharo-compiledMethod-4"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-quoremstandard-initialize"><div class="highlight"><pre><span></span><span class="c">&quot;QuoRemStandard, protocol accessing&quot;</span>
<span class="nf">initialize</span>

   <span class="bp">super</span> <span class="nf">initialize</span><span class="p">.</span>

   <span class="nv">quo</span> <span class="o">:=</span> <span class="bp">self</span> <span class="nf">value</span> <span class="nf">floor</span><span class="p">.</span>
   <span class="nv">rem</span> <span class="o">:=</span> <span class="nv">a</span> <span class="nf">-</span> (<span class="nv">quo</span> <span class="nf">*</span> <span class="nv">b</span>)
</pre></div>
</div>
<p>as the usual computation does and the assertion checks in the initial test case.</p>
<p>The same division can be carried out by</p>
<span class="target" id="pharo-compiledMethod-5"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testcomplementaryquorem21over9"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testComplementaryQuoRem21Over9</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">21</span> <span class="nf">/%~</span> <span class="m">9</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> <span class="m">21</span> <span class="nf">/</span> <span class="m">9</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testComplementaryQuoRem21Over9.svg" class="align-center" src="../_images/SymbolicIntegerTest-testComplementaryQuoRem21Over9.svg" /></div></blockquote>
<p>that yields a negative remainder, shown by full dots. To do that, we have the following messages chain</p>
<span class="target" id="pharo-compiledMethod-6"></span><div class="highlight-smalltalk notranslate" id="id1"><div class="highlight"><pre><span></span><span class="c">&quot;Integer, protocol *Containers-Essentials&quot;</span>
<span class="nf">/%~</span> <span class="nv">anObject</span>

   <span class="o">^</span> <span class="nv">anObject</span> <span class="nf">quoRemComplementaryInteger:</span> <span class="bp">self</span>
</pre></div>
</div>
<p>that dispatches</p>
<span class="target" id="pharo-compiledMethod-7"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-integer-quoremcomplementaryinteger"><div class="highlight"><pre><span></span><span class="c">&quot;Integer, protocol *Containers-Essentials&quot;</span>
<span class="nf">quoRemComplementaryInteger:</span> <span class="nv">anInteger</span>

   <span class="o">^</span> <span class="nc">QuoRemComplementary</span> <span class="nf">a:</span> <span class="nv">anInteger</span> <span class="nf">b:</span> <span class="bp">self</span>
</pre></div>
</div>
<p>which instantiate a symbolic <code class="docutils literal notranslate"><span class="pre">Magnitude</span></code> object of class</p>
<span class="target" id="pharo-class-0"></span><div class="highlight-smalltalk notranslate" id="pharo-class-quoremcomplementary"><div class="highlight"><pre><span></span><span class="nc">Magnitude</span> <span class="nf">subclass:</span> <span class="ss">#QuoRemComplementary</span>
	<span class="nf">instanceVariableNames:</span> <span class="s">&#39;a b ratio quo rem&#39;</span>
	<span class="nf">classVariableNames:</span> <span class="s">&#39;&#39;</span>
	<span class="nf">package:</span> <span class="s">&#39;Containers-Essentials&#39;</span>
</pre></div>
</div>
<p>Both the <em>quotient</em> and the <em>remainder</em> are computed in the initialization message</p>
<span class="target" id="pharo-compiledMethod-8"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-quoremcomplementary-initialize"><div class="highlight"><pre><span></span><span class="c">&quot;QuoRemComplementary, protocol accessing&quot;</span>
<span class="nf">initialize</span>

   <span class="nv">ratio</span> <span class="o">:=</span> <span class="nv">a</span> <span class="nf">/</span> <span class="nv">b</span><span class="p">.</span>

   <span class="nv">quo</span> <span class="o">:=</span> <span class="bp">self</span> <span class="nf">value</span> <span class="nf">ceiling</span><span class="p">.</span>
   <span class="nv">rem</span> <span class="o">:=</span> <span class="nv">a</span> <span class="nf">-</span> (<span class="nv">quo</span> <span class="nf">*</span> <span class="nv">b</span>)
</pre></div>
</div>
<p>The latter representation is uniform in the sense that it yields a rectangle of dots
that are stacked horizontally, where the number of rows equals the quotient of the division
while the number of columns equals the divisor denoted by the instance variable <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<span class="target" id="pharo-compiledMethod-9"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testcomplementaryquorem9over21"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testComplementaryQuoRem9Over21</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">9</span> <span class="nf">/%~</span> <span class="m">21</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> <span class="m">9</span> <span class="nf">/</span> <span class="m">21</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testComplementaryQuoRem9Over21.svg" class="align-center" src="../_images/SymbolicIntegerTest-testComplementaryQuoRem9Over21.svg" /></div></blockquote>
<span class="target" id="pharo-compiledMethod-10"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testquorem9over21"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testQuoRem9Over21</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">9</span> <span class="nf">/%</span> <span class="m">21</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> <span class="m">9</span> <span class="nf">/</span> <span class="m">21</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testQuoRem9Over21.svg" class="align-center" src="../_images/SymbolicIntegerTest-testQuoRem9Over21.svg" /></div></blockquote>
<span class="target" id="pharo-compiledMethod-11"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testquoremminimal9over21"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testQuoRemMinimal9Over21</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">9</span> <span class="nf">/%&lt;</span> <span class="m">21</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> <span class="m">9</span> <span class="nf">/</span> <span class="m">21</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testQuoRemMinimal9Over21.svg" class="align-center" src="../_images/SymbolicIntegerTest-testQuoRemMinimal9Over21.svg" /></div></blockquote>
</div>
<div class="section" id="greatest-common-divisor">
<h2>Greatest Common Divisor<a class="headerlink" href="#greatest-common-divisor" title="Permalink to this headline">¶</a></h2>
<span class="target" id="pharo-compiledMethod-12"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdof9and21"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDof9and21</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">9</span> <span class="nf">&gt;|&lt;</span> <span class="m">21</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> (<span class="m">9</span> <span class="nf">gcd:</span> <span class="m">21</span>)<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDof9and21.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDof9and21.svg" /></div></blockquote>
<span class="target" id="pharo-compiledMethod-13"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdof12and21"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDof12and21</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">12</span> <span class="nf">&gt;|&lt;</span> <span class="m">21</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> (<span class="m">12</span> <span class="nf">gcd:</span> <span class="m">21</span>)<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDof12and21.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDof12and21.svg" /></div></blockquote>
</div>
<div class="section" id="diophantine-equations">
<h2>Diophantine equations<a class="headerlink" href="#diophantine-equations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="coprimes">
<h3>Coprimes<a class="headerlink" href="#coprimes" title="Permalink to this headline">¶</a></h3>
<span class="target" id="pharo-compiledMethod-14"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdof83and71"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDof83and71</span>

   <span class="o">|</span><span class="nv"> quoRem </span><span class="o">|</span>
   <span class="nv">quoRem</span> <span class="o">:=</span> <span class="m">83</span> <span class="nf">&gt;|&lt;</span> <span class="m">71</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">quoRem</span> <span class="nf">value</span> <span class="nf">equals:</span> (<span class="m">83</span> <span class="nf">gcd:</span> <span class="m">71</span>)<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">quoRem</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDof83and71.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDof83and71.svg" /></div></blockquote>
</div>
<div class="section" id="mathbb-z-17-field">
<h3><span class="math notranslate nohighlight">\(\mathbb{Z}_{17}\)</span> field<a class="headerlink" href="#mathbb-z-17-field" title="Permalink to this headline">¶</a></h3>
<span class="target" id="pharo-compiledMethod-15"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdofz17"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDofZ17</span>

   <span class="o">|</span><span class="nv"> field prime interval </span><span class="o">|</span>
   <span class="nv">prime</span> <span class="o">:=</span> <span class="m">17</span><span class="p">.</span>
   <span class="nv">interval</span> <span class="o">:=</span> <span class="m">1</span> <span class="nf">to:</span> <span class="nv">prime</span> <span class="nf">-</span> <span class="m">1</span><span class="p">.</span>
   <span class="nv">field</span> <span class="o">:=</span> <span class="nv">interval</span> <span class="nf">collect:</span> [ <span class="o">:</span><span class="nv">each</span> <span class="o">|</span> <span class="nv">each</span> <span class="nf">&gt;|&lt;</span> <span class="nv">prime</span> ]<span class="p">.</span>

   <span class="bp">self</span>
      <span class="nf">assert:</span> (<span class="nv">field</span> <span class="nf">collect:</span> <span class="ss">#value</span>)
      <span class="nf">equals:</span> (<span class="nv">interval</span> <span class="nf">collect:</span> [ <span class="o">:</span><span class="nv">each</span> <span class="o">|</span> <span class="nv">prime</span> <span class="nf">gcd:</span> <span class="nv">each</span> ])<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">field</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDofZ17.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDofZ17.svg" /></div></blockquote>
<span class="target" id="pharo-compiledMethod-16"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdofmultiplicativeinversesinz17"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDofMultiplicativeInversesInZ17</span>

   <span class="o">|</span><span class="nv"> gcds inverses </span><span class="o">|</span>
   <span class="nv">gcds</span> <span class="o">:=</span> <span class="bp">self</span> <span class="nf">testGCDofZ17</span><span class="p">.</span>
   <span class="nv">inverses</span> <span class="o">:=</span> <span class="nc">PointArray</span> <span class="nf">new:</span> <span class="nv">gcds</span> <span class="nf">size</span> <span class="nf">+</span> <span class="m">1</span><span class="p">.</span>
   <span class="nv">gcds</span> <span class="nf">withIndexDo:</span> [ <span class="o">:</span><span class="nv">each</span> <span class="o">:</span><span class="nv">index</span> <span class="o">|</span> 
      <span class="nv">inverses</span> <span class="nf">at:</span> <span class="nv">index</span> <span class="nf">put:</span> <span class="nv">each</span> <span class="nf">b</span> <span class="nf">@</span> <span class="nv">each</span> <span class="nf">inverseMultiplicativeOfb</span> <span class="nf">key</span> ]<span class="p">.</span>

   <span class="nv">inverses</span> <span class="nf">at:</span> <span class="nv">inverses</span> <span class="nf">size</span> <span class="nf">put:</span> <span class="m">0</span> <span class="nf">@</span> <span class="m">0</span><span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">inverses</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDofMultiplicativeInversesInZ17.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDofMultiplicativeInversesInZ17.svg" /></div></blockquote>
</div>
<div class="section" id="gcd-f-n-f-n-1-where-f-n-is-the-n-th-fibonacci-number">
<h3><span class="math notranslate nohighlight">\(GCD(F_{n}, F_{n+1})\)</span>, where <span class="math notranslate nohighlight">\(F_{n}\)</span> is the <span class="math notranslate nohighlight">\(n\)</span>-th Fibonacci number<a class="headerlink" href="#gcd-f-n-f-n-1-where-f-n-is-the-n-th-fibonacci-number" title="Permalink to this headline">¶</a></h3>
<span class="target" id="pharo-compiledMethod-17"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-symbolicintegertest-testgcdofadjacentfibonaccinumbers"><div class="highlight"><pre><span></span><span class="c">&quot;SymbolicIntegerTest, protocol tests&quot;</span>
<span class="nf">testGCDofAdjacentFibonacciNumbers</span>

   <span class="o">|</span><span class="nv"> fibs gcds </span><span class="o">|</span>
   <span class="nv">fibs</span> <span class="o">:=</span> <span class="nc">OrderedCollection</span> <span class="nf">with:</span> <span class="m">1</span> <span class="nf">with:</span> <span class="m">1</span><span class="p">.</span>

   <span class="m">3</span> <span class="nf">to:</span> <span class="m">11</span> <span class="nf">do:</span> [ <span class="o">:</span><span class="nv">i</span> <span class="o">|</span> <span class="nv">fibs</span> <span class="nf">add:</span> (<span class="nv">fibs</span> <span class="nf">at:</span> <span class="nv">i</span> <span class="nf">-</span> <span class="m">2</span>) <span class="nf">+</span> (<span class="nv">fibs</span> <span class="nf">at:</span> <span class="nv">i</span> <span class="nf">-</span> <span class="m">1</span>) ]<span class="p">.</span>

   <span class="nv">gcds</span> <span class="o">:=</span> <span class="nv">fibs</span>
              <span class="nf">with:</span> <span class="nv">fibs</span> <span class="nf">allButFirst</span> <span class="nf">,</span> { (<span class="nv">fibs</span> <span class="nf">lastButOne</span> <span class="nf">+</span> <span class="nv">fibs</span> <span class="nf">last</span>) }
              <span class="nf">collect:</span> [ <span class="o">:</span><span class="nv">r</span> <span class="o">:</span><span class="nv">s</span> <span class="o">|</span> <span class="nv">r</span> <span class="nf">&gt;|&lt;</span> <span class="nv">s</span> ]<span class="p">.</span>

   <span class="bp">self</span>
      <span class="nf">assert:</span> (<span class="nv">gcds</span> <span class="nf">collect:</span> <span class="ss">#value</span>)
      <span class="nf">equals:</span> (<span class="nv">gcds</span> <span class="nf">collect:</span> [ <span class="o">:</span><span class="nv">each</span> <span class="o">|</span> <span class="m">1</span> ])<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="nv">gcds</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/SymbolicIntegerTest-testGCDofAdjacentFibonacciNumbers.svg" class="align-center" src="../_images/SymbolicIntegerTest-testGCDofAdjacentFibonacciNumbers.svg" /></div></blockquote>
</div>
<div class="section" id="kissing-fractions">
<span id="kissing-fractions-diophantine"></span><h3>Kissing <code class="docutils literal notranslate"><span class="pre">Fraction</span></code>s<a class="headerlink" href="#kissing-fractions" title="Permalink to this headline">¶</a></h3>
<p>Consider the <code class="docutils literal notranslate"><span class="pre">Fraction</span></code></p>
<span class="target" id="pharo-compiledMethod-18"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-essentialsobjecttest-testinspectfractionforkisses"><div class="highlight"><pre><span></span><span class="c">&quot;EssentialsObjectTest, protocol tests&quot;</span>
<span class="nf">testInspectFractionForKisses</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportSlotsGraphOf:</span> <span class="m">4</span> <span class="nf">/</span> <span class="m">17</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/EssentialsObjectTest-testInspectFractionForKisses.svg" class="align-center" src="../_images/EssentialsObjectTest-testInspectFractionForKisses.svg" /></div></blockquote>
<p>which kisses other fractions, by tangents of Ford’s circles</p>
<span class="target" id="pharo-compiledMethod-19"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-essentialsobjecttest-testinspectfractionkissing"><div class="highlight"><pre><span></span><span class="c">&quot;EssentialsObjectTest, protocol tests&quot;</span>
<span class="nf">testInspectFractionKissing</span>

   <span class="o">|</span><span class="nv"> aFraction </span><span class="o">|</span>
   <span class="nv">aFraction</span> <span class="o">:=</span> <span class="bp">self</span> <span class="nf">testInspectFractionForKisses</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">aFraction</span> <span class="nf">kissingFractions</span> <span class="nf">equals:</span> { 
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">5</span>)<span class="p">.</span>
         (<span class="m">2</span> <span class="nf">/</span> <span class="m">9</span>)<span class="p">.</span>
         (<span class="m">3</span> <span class="nf">/</span> <span class="m">13</span>)<span class="p">.</span>
         (<span class="m">4</span> <span class="nf">/</span> <span class="m">17</span>)<span class="p">.</span>
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">4</span>)<span class="p">.</span>
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">3</span>)<span class="p">.</span>
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">2</span>) }<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportShapeOf:</span> <span class="nv">aFraction</span> <span class="nf">accessorBlock:</span> <span class="ss">#asShapeFordCircles</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/EssentialsObjectTest-testInspectFractionKissing.svg" class="align-center" src="../_images/EssentialsObjectTest-testInspectFractionKissing.svg" /></div></blockquote>
<p>where</p>
<span class="target" id="pharo-compiledMethod-20"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-fraction-kissingfractions"><div class="highlight"><pre><span></span><span class="c">&quot;Fraction, protocol *Containers-Essentials&quot;</span>
<span class="nf">kissingFractions</span>

   <span class="o">|</span><span class="nv"> kissedFractions vl </span><span class="o">|</span>
   <span class="nv">kissedFractions</span> <span class="o">:=</span> <span class="nc">Set</span> <span class="nb">new</span><span class="p">.</span>

   <span class="nv">vl</span> <span class="o">:=</span> <span class="nc">ValueLink</span> <span class="nb">new</span>
            <span class="nf">value:</span> <span class="bp">self</span> <span class="nf">asFractionWrtFloor</span><span class="p">;</span>
            <span class="nf">yourself</span><span class="p">.</span>

   [ <span class="nv">vl</span> ] <span class="nf">whileNotNil:</span> [ 
      <span class="o">|</span> <span class="nv">gcd</span> <span class="nf">diophantinePoint</span> <span class="nf">next</span> <span class="nf">less</span> <span class="nf">aFraction</span> <span class="nf">|</span>
      <span class="nv">aFraction</span> <span class="o">:=</span> <span class="nv">vl</span> <span class="nf">value</span><span class="p">.</span>
      <span class="nv">kissedFractions</span> <span class="nf">add:</span> <span class="nv">aFraction</span><span class="p">.</span>

      <span class="nv">gcd</span> <span class="o">:=</span> <span class="nv">aFraction</span> <span class="nf">numerator</span> <span class="nf">&gt;|&lt;</span> <span class="nv">aFraction</span> <span class="nf">denominator</span><span class="p">.</span>
      <span class="nv">diophantinePoint</span> <span class="o">:=</span> <span class="nv">gcd</span> <span class="nf">point</span><span class="p">.</span>
      <span class="nv">next</span> <span class="o">:=</span> <span class="nv">diophantinePoint</span> <span class="nf">x</span> <span class="nf">/</span> <span class="nv">diophantinePoint</span> <span class="nf">y</span> <span class="nf">negated</span><span class="p">.</span>

      <span class="nv">less</span> <span class="o">:=</span> <span class="nv">aFraction</span> <span class="nf">numerator</span> <span class="nf">-</span> <span class="nv">next</span> <span class="nf">numerator</span>
              <span class="nf">/</span> (<span class="nv">aFraction</span> <span class="nf">denominator</span> <span class="nf">-</span> <span class="nv">next</span> <span class="nf">denominator</span>)<span class="p">.</span>

      <span class="nv">vl</span> <span class="o">:=</span> <span class="nv">next</span> <span class="nf">kissingFractionLink:</span>
               (<span class="nv">less</span> <span class="nf">kissingFractionLink:</span> <span class="nv">vl</span> <span class="nf">nextLink</span>) ]<span class="p">.</span>

   <span class="o">^</span> <span class="nv">kissedFractions</span> <span class="nf">asArray</span>
        <span class="nf">sort</span><span class="p">;</span>
        <span class="nf">yourself</span>
</pre></div>
</div>
<p>and the polymorphism on <code class="docutils literal notranslate"><span class="pre">#kissingFractionLink:</span></code> reads as follows</p>
<span class="target" id="pharo-compiledMethod-21"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-fraction-kissingfractionlink"><div class="highlight"><pre><span></span><span class="c">&quot;Fraction, protocol *Containers-Essentials&quot;</span>
<span class="nf">kissingFractionLink:</span> <span class="nv">aLink</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">~~&gt;</span> <span class="nv">aLink</span>
</pre></div>
</div>
<span class="target" id="pharo-compiledMethod-22"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-integer-kissingfractionlink"><div class="highlight"><pre><span></span><span class="c">&quot;Integer, protocol *Containers-Essentials&quot;</span>
<span class="nf">kissingFractionLink:</span> <span class="nv">aLink</span>

   <span class="o">^</span> <span class="nv">aLink</span>
</pre></div>
</div>
<p>Moreover, consider the reciprocal</p>
<span class="target" id="pharo-compiledMethod-23"></span><div class="highlight-smalltalk notranslate" id="pharo-compiledmethod-essentialsobjecttest-testinspectfractionreciprocalkissing"><div class="highlight"><pre><span></span><span class="c">&quot;EssentialsObjectTest, protocol tests&quot;</span>
<span class="nf">testInspectFractionReciprocalKissing</span>

   <span class="o">|</span><span class="nv"> aFraction </span><span class="o">|</span>
   <span class="nv">aFraction</span> <span class="o">:=</span> <span class="bp">self</span> <span class="nf">testInspectFractionKissing</span> <span class="nf">reciprocal</span><span class="p">.</span>

   <span class="bp">self</span> <span class="nf">assert:</span> <span class="nv">aFraction</span> <span class="nf">kissingFractions</span> <span class="nf">equals:</span> { 
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">4</span>)<span class="p">.</span>
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">3</span>)<span class="p">.</span>
         (<span class="m">1</span> <span class="nf">/</span> <span class="m">2</span>) }<span class="p">.</span>

   <span class="o">^</span> <span class="bp">self</span> <span class="nf">exportShapeOf:</span> <span class="nv">aFraction</span> <span class="nf">accessorBlock:</span> <span class="ss">#asShapeFordCircles</span>
</pre></div>
</div>
<blockquote>
<div><img alt="../_images/EssentialsObjectTest-testInspectFractionReciprocalKissing.svg" class="align-center" src="../_images/EssentialsObjectTest-testInspectFractionReciprocalKissing.svg" /></div></blockquote>
<p>which yields a simpler visualization.</p>
</div>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020, Massimo Nocentini.
      
      |
      <a href="../_sources/symbolic/divisibility.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>